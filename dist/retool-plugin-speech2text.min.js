!function(){"use strict";var e="style-module_speecher__ZAYi-",t="style-module_button__jq3AX",o="style-module_row__H2sPc",n="style-module_err__g8zge";!function(e,t){void 0===t&&(t={});var o=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('*{box-sizing:border-box}body,html{height:100%;margin:0;overflow:hidden;padding:0;width:100%}.style-module_speecher__ZAYi-{font-family:Inter var,Inter,-apple-system,"system-ui",system-ui,Segoe UI,Roboto,Helvetica Neue,Ubuntu,sans-serif}body{align-items:center;display:flex;flex-direction:column;justify-content:center;margin:0;overflow:hidden;padding:0}.style-module_button__jq3AX{background-color:#1c37f3;border:1px solid #2655f6;border-radius:4px;color:#fff;cursor:pointer;display:block;font-size:12px;font-weight:500;height:100%;padding:8px;pointer-events:all;width:100%}.style-module_button__jq3AX:hover{border:1px solid #2655f6}.style-module_row__H2sPc{display:flex;height:100%;width:100%}.style-module_title__Hei5S{font-size:.9rem}.style-module_err__g8zge,.style-module_title__Hei5S{align-items:center;display:flex;flex-direction:column;justify-content:center;pointer-events:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none}.style-module_err__g8zge{background-color:hsla(0,100%,95%,.85);font-size:.8rem;height:100%;left:0;position:absolute;top:0;width:100%}.style-module_active__ssQXz{opacity:1;pointer-events:all}.style-module_inactive__gXEdI{opacity:.5;pointer-events:none}');const i=window.Retool;let s,l,d=!1;const r={"not-allowed":'You need to allow "Microphone" and "Storage and cookies" in Custom Component panel.',"no-speech":"Stop due no speech around."};let c,a=!1,u=!1,p=!1;const m=[],y=e=>{const{continuous:t=!1,interimResults:o=!0,lang:n="en-US",maxAlternatives:d=1,keepActive:a=!0,labelStart:y="Start",labelStop:h="Stop",preload:g=!1}=e||{};c=new webkitSpeechRecognition,c.continuous=t,c.interimResults=o,c.lang=n,c.maxAlternatives=d,c.onresult=e=>{const t=e.results[0],o=t[0].transcript.trim();t.isFinal&&(m.push(o),i.modelUpdate({lastMessage:o,messages:m}))},c.onstart=function(){l.style.visibility="hidden",p=!1,s.textContent=h},c.onerror=function(e){l.style.visibility="visible",l.innerHTML=r[e.error],"no-speech"===e.error&&a||(l.style.visibility="visible",p=!0)},c.onend=function(){s.textContent=y,p||a&&!u&&_()}},_=()=>{u=!1,c.start()},h=()=>{u=!0,c.stop()};i.subscribe((i=>{const r=i||{};r?.lastMessage||r?.messages||console.log("Speech2Text: model changed from editor");const{preload:u=!1}=r||{};if(u)return console.log("Speech2Text: component is preloaded"),!0;a||((i=>{document.body.classList.add(e),l=document.createElement("div"),l.classList.add(n),l.style.visibility="hidden",window.SpeechRecognition||window.webkitSpeechRecognition||(l.style.visibility="visible",l.innerHTML="Your browser is not supported, sorry.");const r=document.createElement("div");r.classList.add(o),document.body.append(r);const{labelStart:a="Start"}=i||{};s=document.createElement("button"),s.textContent=a,s.classList.add(t),r.append(s),s.addEventListener("click",(()=>{d?(h(),d=!1):(c||y(i),_(),d=!0)})),document.body.append(l)})(r),a=!0)}))}();
